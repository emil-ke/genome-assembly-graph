# Notebook Entry - Find Components with at Least Three Vertices

## 2023-06-03

Today, I completed the implementation of the component counting functionality in the project. The goal was to determine the number of connected components in the graph that have at least three vertices. To accomplish this, I used depth-first search (DFS) to traverse the graph.

I wrote the following code to count the components:

```java
/**
 * Counts the number of connected components in the graph that have at least three vertices.
 * Uses depth-first search (DFS) to traverse the graph.
 *
 * @return The count of components with at least three vertices.
 *
 * Time Complexity: O(V + E) where V is the number of nodes and E is the number of edges in the graph.
 */
public int countComponents() {
    Set<Integer> visited = new HashSet<>(); // We use a HashSet instead of an array for better time complexity (contains operation)
    int componentCount = 0;

    for (int node : graph.keySet()) {
        if (!visited.contains(node)) {
            // if vertex count >= 3, add 1 to componentCount, else add 0 (ternary)
            componentCount += (dfsCountNodes(node, visited) >= 3) ? 1 : 0;
        }
    }

    return componentCount;
}

// DFS helper for counting nodes, returns vertex count
private int dfsCountNodes(int node, Set<Integer> visited) {
    visited.add(node);
    int verticesCount = 1;

    for (int neighbor : graph.get(node)) {
        verticesCount += (!visited.contains(neighbor)) ? dfsCountNodes(neighbor, visited) : 0;
    }

    return verticesCount;
}
```

To ensure the correctness of the implementation, I tested it on a small test dataset. I created the graph via the smaller test data files I created yesterday (see entry for 2023-06-02) with a few vertices and edges, and verified that the count of components with at least three vertices matched my expected results.

The cleaned version of the graph from the entire dataset that we are working with contains 226,796 components with at least three vertices.

```
‚ùØ java -Xss1G -Xms24G -jar GraphProcessor.jar ../overlaps.m4/cleaned.m4
Number of components with at least three vertices: 226796
```

The time complexity of the countComponents method is O(V + E), where V is the number of nodes and E is the number of edges in the graph.
